<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Users App Frontend</title>
</head>
<style>

</style>
<body>
    <h1>Mini Users App</h1>
    <button id="create">Create User</button>
    <button id="read">Read Users</button>
    <button id="update">Update User of ID 1</button>
    <button id="delete">Delete User of ID 1</button>

</body>
<script>
  let baseURL =  "https://short-bustling-toaster.glitch.me";
 

 //create button
 let create=document.getElementById("createbtn");
 
    create.addEventListener("click", async function(){
        let username=document.getElementById("user").value;
        try{
let res= await fetch(baseURL, {
  method: "POST",
  headers: {
    "Content-Type": "application/json", 
  },
  body: JSON.stringify({username}),
});
alert("User Added");
console.log("clicked")
        }
        catch(err){
console.log(err);
console.log("error")
        }
    })

    //read
    getUser();
    async function getUser(){
        try{
let res= await fetch("https://scientific-young-ankylosaurus.glitch.me/users");
let data=await res.json();
console.log(data);
displayUser(data);
        }
        catch(err){

        }
    }


    function displayUser(arr){
        let cont=document.getElementById("cont");
arr.map((el,i)=>{
    
    let user=document.createElement("h3");
    user.textContent=`User Name: ${el.username}`
    cont.append(user)
})
    }

    //update

let updatebtn=document.getElementById("update");
    updatebtn.addEventListener("click", async function () {
        if(confirm("Are You Sure?")){

       
        try{
let res=await fetch(baseURL, {
  method: "PATCH", 
  headers: {
    "Content-Type": "application/json", 
  },
  body: JSON.stringify({username:"Charlie"}), 
});
        
alert("Data got updated");
        }
        catch(err){
            console.log(err);
        }
    }
        
    })

    //delete

    let deletebtn=document.getElementById("delete");
    deletebtn.addEventListener("click", async function () {
        try{
let res=await fetch(baseURL, {
  method: "DELETE", 
  headers: {
    "Content-Type": "application/json", 
  } 
});
confirm("Are You Sure?");
alert("Data got Deleted");
        }
        catch(err){
            console.log(err);
        }
    })

    
  </script>
</html>